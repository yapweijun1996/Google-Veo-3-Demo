<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="AI Video Generator using Google Veo 3 - Generate videos from text prompts" />
  <title>Veo 3 Video Generator</title>

  <!-- Import map for Google GenAI SDK -->
  <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@latest"
      }
    }
    </script>

  <!-- Link to CSS file -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Main application container -->
  <div class="app-container" role="main">
    <!-- Chat header with title and settings -->
    <header class="chat-header">
      <h1 class="app-title">Veo 3 Video Generator</h1>
      <button class="settings-button" aria-label="Open settings" title="Settings" type="button">
        <svg class="settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
          </path>
        </svg>
      </button>
    </header>

    <!-- Chat messages container -->
    <main class="chat-messages" role="log" aria-live="polite" aria-label="Chat conversation">
      <div class="messages-container" id="messages-container">
        <!-- Messages will be dynamically added here -->
      </div>
    </main>

    <!-- Chat input area -->
    <footer class="chat-input">
      <div class="input-container">
        <input type="text" class="message-input" id="message-input"
          placeholder="Describe the video you want to generate..." aria-label="Enter video description"
          maxlength="500" />
        <button class="send-button" id="send-button" type="button" aria-label="Send message" title="Send">
          <svg class="send-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22,2 15,22 11,13 2,9"></polygon>
          </svg>
        </button>
      </div>
    </footer>
  </div>

  <!-- Settings modal -->
  <div class="settings-modal" id="settings-modal" role="dialog" aria-labelledby="settings-title" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="settings-title" class="modal-title">Settings</h2>
        <button class="modal-close" id="modal-close" type="button" aria-label="Close settings" title="Close">
          <svg class="close-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="api-key-input" class="form-label">Google GenAI API Key</label>
          <input type="password" id="api-key-input" class="form-input" placeholder="Enter your API key"
            aria-describedby="api-key-help" />
          <small id="api-key-help" class="form-help">
            Your API key is stored locally and never sent to our servers
          </small>
        </div>
        <div class="form-group">
          <label for="model-select" class="form-label">Model</label>
          <select id="model-select" class="form-select">
            <option value="veo-3.0-generate-preview">Veo 3.0 Generate Preview</option>
            <option value="veo-2.0-generate-preview">Veo 2.0 Generate Preview</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="button button-secondary" id="cancel-button">Cancel</button>
        <button type="button" class="button button-primary" id="save-button">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- Loading overlay -->
  <div class="loading-overlay" id="loading-overlay" aria-hidden="true">
    <div class="loading-content">
      <div class="spinner" aria-label="Loading"></div>
      <p class="loading-text" id="loading-text">Generating video...</p>
    </div>
  </div>

  <!-- Main application script -->
  <script type="module" src="app.js"></script>
  
  <!-- Integration tests (only in development) -->
  <script type="module" src="integration-tests.js"></script>
</body>

</html>